---
import { getCollection } from "astro:content";
import BlogPaginatedPage from "./_components/BlogPaginatedPage.astro";
import { SITE_DESCRIPTION } from "../../consts";

// Get all posts and sort them by publication date (newest first)
const allPosts = (await getCollection("blog")).sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());

// Pagination settings
const postsPerPage = 10;
const currentPage = 1;
const totalPages = Math.ceil(allPosts.length / postsPerPage);

// Get the posts for the current page
const posts = allPosts.slice(0, postsPerPage);
---

<BlogPaginatedPage posts={posts} currentPage={currentPage} totalPages={totalPages} title="Blog" description={SITE_DESCRIPTION} />
